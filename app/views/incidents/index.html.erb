<div class="d-flex justify-content-between align-items-center mb-3">
  <h1>Incidents</h1>
  <div class="d-flex gap-2">
    <%= link_to "Log new incident", new_incident_path, class: "btn btn-primary" %>
    <%= link_to "Back to history", admin_path, class: "btn btn-secondary" %>
  </div>
</div>

<div class="card">
  <div class="card-header">
    <strong>Total:</strong> <%= @incidents.size %>
  </div>

  <table class="table mb-0">
    <thead>
      <tr>
        <th>Title</th>
        <th>Description</th>
        <th>Logged at</th>
        <th class="text-end">Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @incidents.each do |incident| %>
        <tr id="<%= dom_id(incident) %>">
          <td><%= incident.title %></td>
          <td><%= incident.description.to_s %></td>
          <td><%= l(incident.created_at, format: :short) %></td>
          <td class="text-end">
            <%= button_to "Delete",
                          incident_path(incident),
                          method: :delete,
                          form: { data: { turbo_confirm: "Delete this incident?" } },
                          class: "btn btn-sm btn-outline-danger" %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
